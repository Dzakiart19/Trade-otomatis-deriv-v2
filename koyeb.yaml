name: deriv-trading-bot
type: web
docker:
  dockerfile: Dockerfile
ports:
  - port: 8000
    protocol: http
routes:
  - path: /
    port: 8000
env:
  - key: PYTHONUNBUFFERED
    value: "1"
  - key: TZ
    value: "Asia/Jakarta"
  - key: PORT
    value: "8000"
  - key: TELEGRAM_BOT_TOKEN
    value: "@secret:TELEGRAM_BOT_TOKEN"
  - key: DERIV_APP_ID
    value: "@secret:DERIV_APP_ID"
  - key: SESSION_SECRET
    value: "@secret:SESSION_SECRET"
regions:
  - fra
instance_types:
  - eco-small
scaling:
  min: 1
  max: 1
health_checks:
  - type: tcp
    port: 8000
    interval_seconds: 120
    timeout_seconds: 60
    healthy_threshold: 1
    unhealthy_threshold: 10
    grace_period: 300
