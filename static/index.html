<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#FFFFFF">
    <title>Deriv Trading Bot Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="/static/style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@3.0.1/dist/chartjs-plugin-annotation.min.js"></script>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>Deriv Trading Bot</h1>
            <div class="status-bar">
                <div class="connection-status" id="connection-status">
                    <span class="status-dot disconnected"></span>
                    <span class="status-text">Disconnected</span>
                </div>
                <div class="balance-display" id="balance-display">
                    <span class="balance-label">Balance:</span>
                    <span class="balance-value">--</span>
                </div>
                <div class="trading-status" id="trading-status">
                    <span class="trading-indicator">Trading: --</span>
                </div>
            </div>
        </header>

        <div class="dashboard-grid">
            <section class="charts-section">
                <h2>Live Price Charts</h2>
                <div class="strategy-selector" id="strategy-selector">
                    <span class="strategy-label">Strategy:</span>
                    <span class="strategy-name" id="current-strategy">MULTI_INDICATOR</span>
                </div>

                <div id="signal-container">
                    <div id="signal" class="neutral">
                        <div class="signal-content">
                            <span class="signal-icon">⏳</span>
                            <span class="signal-text">Analyzing...</span>
                        </div>
                    </div>
                </div>

                <div class="strategy-panels" id="strategy-panels">
                    <div class="strategy-panel ldp-panel" id="ldp-panel" style="display: none;">
                        <div class="panel-header">
                            <span class="panel-title">LDP - Last Digit Prediction</span>
                            <span class="panel-badge ldp">DIGIT</span>
                        </div>
                        <div class="digit-heatmap" id="digit-heatmap">
                            <div class="digit-cell" data-digit="0"><span class="digit-num">0</span><span class="digit-freq">0%</span></div>
                            <div class="digit-cell" data-digit="1"><span class="digit-num">1</span><span class="digit-freq">0%</span></div>
                            <div class="digit-cell" data-digit="2"><span class="digit-num">2</span><span class="digit-freq">0%</span></div>
                            <div class="digit-cell" data-digit="3"><span class="digit-num">3</span><span class="digit-freq">0%</span></div>
                            <div class="digit-cell" data-digit="4"><span class="digit-num">4</span><span class="digit-freq">0%</span></div>
                            <div class="digit-cell" data-digit="5"><span class="digit-num">5</span><span class="digit-freq">0%</span></div>
                            <div class="digit-cell" data-digit="6"><span class="digit-num">6</span><span class="digit-freq">0%</span></div>
                            <div class="digit-cell" data-digit="7"><span class="digit-num">7</span><span class="digit-freq">0%</span></div>
                            <div class="digit-cell" data-digit="8"><span class="digit-num">8</span><span class="digit-freq">0%</span></div>
                            <div class="digit-cell" data-digit="9"><span class="digit-num">9</span><span class="digit-freq">0%</span></div>
                        </div>
                        <div class="ldp-stats">
                            <div class="ldp-stat hot">
                                <span class="ldp-stat-label">HOT DIGITS</span>
                                <span class="ldp-stat-value" id="hot-digits">--</span>
                            </div>
                            <div class="ldp-stat cold">
                                <span class="ldp-stat-label">COLD DIGITS</span>
                                <span class="ldp-stat-value" id="cold-digits">--</span>
                            </div>
                        </div>
                        <div class="zone-distribution">
                            <div class="zone low-zone">
                                <span class="zone-label">LOW (0-4)</span>
                                <div class="zone-bar"><div class="zone-fill" id="low-zone-fill" style="width: 50%"></div></div>
                                <span class="zone-pct" id="low-zone-pct">50%</span>
                            </div>
                            <div class="zone high-zone">
                                <span class="zone-label">HIGH (5-9)</span>
                                <div class="zone-bar"><div class="zone-fill" id="high-zone-fill" style="width: 50%"></div></div>
                                <span class="zone-pct" id="high-zone-pct">50%</span>
                            </div>
                        </div>
                        <div class="ldp-signal" id="ldp-signal">
                            <span class="ldp-signal-type">DIGITOVER</span>
                            <span class="ldp-signal-digit">5</span>
                        </div>
                    </div>

                    <div class="strategy-panel tick-analyzer-panel" id="tick-analyzer-panel" style="display: none;">
                        <div class="panel-header">
                            <span class="panel-title">Tick Analyzer</span>
                            <span class="panel-badge tick">TICK</span>
                        </div>
                        <div class="tick-analyzer-content">
                            <div class="streak-section">
                                <div class="streak-counter" id="streak-counter">
                                    <span class="streak-direction" id="streak-direction">UP</span>
                                    <span class="streak-count" id="streak-count">0</span>
                                    <span class="streak-label">STREAK</span>
                                </div>
                            </div>
                            <div class="momentum-section">
                                <span class="momentum-label">Momentum</span>
                                <div class="momentum-bar">
                                    <div class="momentum-negative"></div>
                                    <div class="momentum-indicator" id="momentum-indicator" style="left: 50%"></div>
                                    <div class="momentum-positive"></div>
                                </div>
                                <div class="momentum-values">
                                    <span class="momentum-bearish">BEARISH</span>
                                    <span class="momentum-value" id="momentum-value">0.00</span>
                                    <span class="momentum-bullish">BULLISH</span>
                                </div>
                            </div>
                            <div class="pattern-section">
                                <span class="pattern-label">Detected Patterns</span>
                                <div class="pattern-badges" id="pattern-badges">
                                    <span class="pattern-badge none">No pattern</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="strategy-panel multi-indicator-panel" id="multi-indicator-panel" style="display: block;">
                        <div class="panel-header">
                            <span class="panel-title">Multi-Indicator Analysis</span>
                            <span class="panel-badge multi">MULTI</span>
                        </div>
                        <div class="indicator-grid">
                            <div class="indicator-card">
                                <span class="indicator-name">RSI</span>
                                <div class="rsi-gauge">
                                    <div class="rsi-bar">
                                        <div class="rsi-fill" id="rsi-fill" style="width: 50%"></div>
                                        <div class="rsi-marker" id="rsi-marker" style="left: 50%"></div>
                                    </div>
                                    <div class="rsi-zones">
                                        <span class="zone-oversold">30</span>
                                        <span class="zone-neutral">50</span>
                                        <span class="zone-overbought">70</span>
                                    </div>
                                </div>
                                <span class="indicator-value" id="rsi-value">50.00</span>
                            </div>
                            <div class="indicator-card">
                                <span class="indicator-name">Trend</span>
                                <div class="trend-indicator" id="trend-indicator">
                                    <span class="trend-arrow">→</span>
                                    <span class="trend-text">NEUTRAL</span>
                                </div>
                            </div>
                            <div class="indicator-card">
                                <span class="indicator-name">MACD</span>
                                <div class="macd-signal" id="macd-signal">
                                    <span class="macd-histogram neutral">▬</span>
                                    <span class="macd-text">NEUTRAL</span>
                                </div>
                            </div>
                            <div class="indicator-card">
                                <span class="indicator-name">Confluence</span>
                                <div class="confluence-score" id="confluence-score">
                                    <span class="confluence-value">0</span>
                                    <span class="confluence-max">/5</span>
                                </div>
                                <div class="confluence-bar">
                                    <div class="confluence-fill" id="confluence-fill" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tick-picker-panel">
                    <div class="tick-picker-header">
                        <span class="tick-picker-title">Tick Picker</span>
                        <span class="window-size" id="tick-window-size">Window: 50 ticks</span>
                    </div>
                    <div class="tick-picker-stats">
                        <div class="tick-stat up">
                            <span class="tick-label">UP</span>
                            <span class="tick-count" id="tick-up-count">0</span>
                            <span class="tick-pct" id="tick-up-pct">50%</span>
                        </div>
                        <div class="tick-stat down">
                            <span class="tick-label">DOWN</span>
                            <span class="tick-count" id="tick-down-count">0</span>
                            <span class="tick-pct" id="tick-down-pct">50%</span>
                        </div>
                    </div>
                    <div class="tick-picker-signal" id="tick-picker-signal">
                        <span>WAIT</span>
                    </div>
                </div>
                <div class="tick-analysis-info">
                    <span id="trend-details">No active trend detected</span>
                    <span id="tick-counter">Ticks: 0 | Last: --</span>
                </div>
                <div class="charts-grid" id="charts-grid">
                    <div class="chart-card" data-symbol="R_100">
                        <div class="chart-header">
                            <span class="symbol-name">Volatility 100</span>
                            <span class="current-price" id="price-R_100">--</span>
                        </div>
                        <canvas id="chart-R_100"></canvas>
                    </div>
                    <div class="chart-card" data-symbol="R_75">
                        <div class="chart-header">
                            <span class="symbol-name">Volatility 75</span>
                            <span class="current-price" id="price-R_75">--</span>
                        </div>
                        <canvas id="chart-R_75"></canvas>
                    </div>
                    <div class="chart-card" data-symbol="R_50">
                        <div class="chart-header">
                            <span class="symbol-name">Volatility 50</span>
                            <span class="current-price" id="price-R_50">--</span>
                        </div>
                        <canvas id="chart-R_50"></canvas>
                    </div>
                    <div class="chart-card" data-symbol="R_25">
                        <div class="chart-header">
                            <span class="symbol-name">Volatility 25</span>
                            <span class="current-price" id="price-R_25">--</span>
                        </div>
                        <canvas id="chart-R_25"></canvas>
                    </div>
                    <div class="chart-card" data-symbol="R_10">
                        <div class="chart-header">
                            <span class="symbol-name">Volatility 10</span>
                            <span class="current-price" id="price-R_10">--</span>
                        </div>
                        <canvas id="chart-R_10"></canvas>
                    </div>
                    <div class="chart-card" data-symbol="1HZ100V">
                        <div class="chart-header">
                            <span class="symbol-name">1s Volatility 100</span>
                            <span class="current-price" id="price-1HZ100V">--</span>
                        </div>
                        <canvas id="chart-1HZ100V"></canvas>
                    </div>
                    <div class="chart-card" data-symbol="1HZ75V">
                        <div class="chart-header">
                            <span class="symbol-name">1s Volatility 75</span>
                            <span class="current-price" id="price-1HZ75V">--</span>
                        </div>
                        <canvas id="chart-1HZ75V"></canvas>
                    </div>
                    <div class="chart-card" data-symbol="1HZ50V">
                        <div class="chart-header">
                            <span class="symbol-name">1s Volatility 50</span>
                            <span class="current-price" id="price-1HZ50V">--</span>
                        </div>
                        <canvas id="chart-1HZ50V"></canvas>
                    </div>
                </div>
            </section>

            <section class="positions-section">
                <h2>Active Positions</h2>
                <div class="positions-container" id="positions-container">
                    <div class="no-positions">No active positions</div>
                </div>
            </section>

            <section class="history-section">
                <h2>Trade History</h2>
                <div class="history-stats" id="history-stats">
                    <div class="stat-card">
                        <span class="stat-label">Total Trades</span>
                        <span class="stat-value" id="total-trades">0</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-label">Win Rate</span>
                        <span class="stat-value" id="win-rate">0%</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-label">Total P/L</span>
                        <span class="stat-value" id="total-pnl">$0.00</span>
                    </div>
                </div>
                <div class="history-table-container">
                    <table class="history-table" id="history-table">
                        <thead>
                            <tr>
                                <th>Time</th>
                                <th>Symbol</th>
                                <th>Direction</th>
                                <th>Stake</th>
                                <th>Result</th>
                                <th>Profit</th>
                            </tr>
                        </thead>
                        <tbody id="history-tbody">
                        </tbody>
                    </table>
                </div>
            </section>
        </div>
    </div>

    <script src="/static/dashboard.js"></script>
</body>
</html>
